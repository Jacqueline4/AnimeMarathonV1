@page "{username?}"
@model AnimeMarathon.Web.Pages.UserMenuModel
@{
    ViewData["Title"] = "User Profile";
}

<h1>User Profile</h1>

<div>
    <h2>Welcome, @Model.Username</h2>
</div>

<div>
    <h3>Mi lista de Animes:</h3>
    <ul>
        @foreach (var animeUser in Model.UserAnimes)
        {
            <li>@animeUser.Title</li>
        }
    </ul>
</div>
<div>
    <h3>Animes:</h3>
    <ul>
        @foreach (var anime in Model.Animes)
        {
            <li>@anime.Title</li>
        }
    </ul>
</div>

@* 
@section Scripts {
    <script>
        // Function to fetch user profile and anime list from API
        async function getUserProfile() {
            const response = await fetch("https://localhost:7269/Anime", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            });

            if (response.ok) {
                const data = await response.json();
                document.getElementById("animeList").innerHTML = ""; // Clear existing anime list

                // Display user's anime list
                data.animes.forEach(anime => {
                    const listItem = document.createElement("li");
                    listItem.textContent = anime.title;
                    document.getElementById("animeList").appendChild(listItem);
                });
            } else {
                console.error("Failed to fetch user profile");
            }
        }

        // Call function to fetch user profile and anime list when the page loads
        window.onload = getUserProfile;
    </script> *@
